# Zoomex Perpetual Futures Trading Configuration
# Copy this file to config/strategy.yaml and customize for your setup

app_mode: "paper"
shadow_paper: false

exchange:
  name: "zoomex"
  api_key: "${ZOOMEX_API_KEY}"
  secret_key: "${ZOOMEX_API_SECRET}"
  passphrase: ""
  testnet: true
  base_url: "https://openapi-testnet.zoomex.com"

trading:
  initial_capital: 1000.0
  risk_per_trade: 0.006
  max_positions: 3
  max_daily_risk: 0.05
  max_sector_exposure: 0.20
  symbols:
    - "BTCUSDT"
    - "ETHUSDT"
    - "SOLUSDT"

strategy:
  regime:
    ema_period: 200
    macd_fast: 12
    macd_slow: 26
    macd_signal: 9
    weight: 0.25
  setup:
    ema_fast: 8
    ema_medium: 21
    ema_slow: 55
    adx_period: 14
    adx_threshold: 25
    atr_period: 14
    atr_multiplier: 2.0
    weight: 0.30
  signals:
    rsi_period: 14
    rsi_oversold: 40
    rsi_overbought: 60
    donchian_period: 20
    divergence_lookback: 3
    weight: 0.35
  confidence:
    min_threshold: 50
    full_size_threshold: 70
    crisis_threshold: 80
    penalties:
      high_volatility: -3
      low_volume: -3
      conflicting_timeframes: -4

risk_management:
  ladder_entries:
    weights: [0.25, 0.35, 0.40]
    confirmation_bars: 2
    momentum_bars: 4
  stops:
    soft_atr_multiplier: 1.5
    hard_risk_percent: 0.02
    time_based_hours: 48
    trail_atr_multiplier: 1.0
  crisis_mode:
    drawdown_threshold: 0.10
    consecutive_losses: 3
    volatility_multiplier: 3.0
    position_size_reduction: 0.50

data:
  timeframes:
    signal: "1h"
    setup: "4h"
    regime: "1d"
  lookback_periods:
    signal: 200
    setup: 100
    regime: 50

logging:
  level: "INFO"
  file: "logs/trading.log"
  max_size: "10MB"
  backup_count: 5

database:
  path: "data/trading.db"
  backup_interval: 3600

backtesting:
  slippage: 0.0005
  commission: 0.001
  initial_balance: 1000.0

paper:
  fee_bps: 7
  maker_rebate_bps: -1
  funding_enabled: true
  slippage_bps: 3
  max_slippage_bps: 10
  latency_ms:
    mean: 120
    p95: 300
  partial_fill:
    enabled: true
    min_slice_pct: 0.15
    max_slices: 4
  price_source: "live"
  max_leverage: 5
  initial_margin_pct: 0.1
  maintenance_margin_pct: 0.005

replay:
  source: "parquet://bars/"
  speed: "10x"
  start: "2023-01-01"
  end: "2024-12-31"

dashboard:
  refresh_interval: 5
  chart_periods: 100
  max_trades_display: 50

messaging:
  servers:
    - "nats://127.0.0.1:4222"
  subjects:
    market_data: "market.data"
    orders: "trading.orders"
    positions: "trading.positions"
    executions: "trading.executions"
    executions_shadow: "trading.executions.shadow"
    risk: "risk.management"
    performance: "performance.metrics"
    config_reload: "config.reload"

perps:
  enabled: true
  exchange: zoomex
  symbol: "SOLUSDT"
  interval: "5"
  leverage: 1
  mode: "oneway"
  positionIdx: 0
  riskPct: 0.005
  stopLossPct: 0.01
  takeProfitPct: 0.03
  cashDeployCap: 0.20
  triggerBy: "LastPrice"
  useMultiTfAtrStrategy: true
  htfInterval: "60"
  atrPeriod: 14
  atrStopMultiple: 1.5
  hardStopMinPct: 0.008
  tp1Multiple: 1.0
  tp2Multiple: 2.5
  maxBarsInTrade: 110
  minAtrPct: 0.002
  useRsiFilter: true
  rsiPeriod: 14
  rsiMin: 40
  rsiMax: 70
  useVolumeFilter: false
  volumeLookback: 20
  volumeSpikeMultiplier: 1.25
  exitOnTrendFlip: true
  maxEmaDistanceAtr: 0.75
  wickAtrBuffer: 0.35
  atrRiskScaling: true
  atrRiskScalingThreshold: 0.02
  atrRiskScalingFactor: 0.5
  breakevenAfterTp1: true
  earlyExitOnCross: false
  useTestnet: true
  consecutiveLossLimit: 3
  maxMarginRatio: 0.8
  maxRequestsPerSecond: 5
  maxRequestsPerMinute: 60
  sessionMaxTrades: 10
  sessionMaxRuntimeMinutes: 120
